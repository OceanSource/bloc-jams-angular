<div id="metrics" ng-controller="MetricCtrl">

  <div class="container narrow">

    <h2>{{title}}</h2>
    <h4>{{subTitle}}</h4>

    <div id="metrics-d3" class="clearfix">

      <div class="column half">
        <h3>Albums Played</h3>
        <nvd3 data="albumData" options="albumOptions"></nvd3>
      </div>

      <div class="column half">
        <h3>Songs Played</h3>
        <nvd3 data="songsData" options="songsOptions"></nvd3>
      </div>

    </div>

    <div id="album-drill-down" class="clearfix">
      <div class="column half" ng-repeat="album in metricsObj.albums" ng-if="album.count !== 0">

        <h3>{{album.name}} by {{album.artist}}</h3> <p>Selected Count: {{album.count}}</p>

        <table class="metric-table">
          <thead>
            <tr>
              <th class="song">Songs</th>
              <th class="plays">Play Count</th>
            </tr>
          </thead>

          <tbody>
            <tr ng-repeat="song in metricsObj.albums[$index].songs">
              <td>{{ song.name }}</td>
              <td>{{ song.count}}</td>
            </tr>
          </tbody>
        </table>

      </div>
    </div>

    <div id="history" class="clearfix">

      <h3>History</h3>

      <table class="metric-table">
        <thead>
          <tr>
            <th class="date">Time</th>
            <th class="songHistory">Song</th>
            <th class="artist">Artist</th>
            <th class="album">Album</th>
          </tr>
        </thead>

        <tbody>
          <tr ng-repeat="song in metricsObj.history">
            <td>{{ song.date | date:'medium' }}</td>
            <td>{{ song.song }}</td>
            <td>{{ song.artist }}</td>
            <td>{{ song.album }}</td>
          </tr>
        </tbody>
      </table>

    </div>

  </div>

</div>